## IDSEQ-DAG
idseq-dag is a simple pipeline execution engine. It takes a description of execution steps
connected in a fashion of directed acyclic graph (DAG) and executes them to the maximum degree
of parallelism possible. Execution steps are connected by means if output parameters of certain
steps that in turn become intput parameter to other steps. A particular pipeline definition
is expected to be in json file with specific format (defined below).

The steps themselves are python classes that extend `PipelineStep` class. They are generic 
and users can provide any implementation not in any shape or form related to idseq project. 

Once idseq-dag installed it can be used to run any specific pipeline like so

```shell
> idseq_dag $pipeline_def.json
```
This will create `PipelineFlow` class and then call method `start()` on it, which will
parse and validate supplied pipeline definition and then execute it.

### Pipeline Definition File
File supplied to the idseq_dag with definition of execution pipeline is a map of key-value 
pairs with following top level keys:

- `output_dir_s3`: URL to S3 bucket were final results/files are copied to.
- `targets`: key-list map where each key is a unique name for combined set of 
    output files for a given step. These are named after Makefiles where targets are 
    generated by execution of specific rules. This is exact analogy used here. 
    Execution steps are expected to generate targets (i.e. all files listed in 
    a given target) and targets are also listed as dependencies for steps.
- `given_targets`: files to be downloaded prior to the execution of the pipeline.
- `steps`: list of exeuction steps where each steps is a map with following keys
    - `in`: list of target dependencies
    - `out`: name of the target that defines output files
    - `class`: name of the class that implements `PipelineStep`
    - `module`: module where above class can be found
    - `additional_attributes`: map of generic key-value pairs to be passed to the constructor
        of this step
    - `additional_files`: map of key-filenames to be downloaded prior to the execution of this
        step. Note that in this case keys are important as they are used by this pipeline step
        to access downloaded files.
    